(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[979],{75255:function(e,t,n){Promise.resolve().then(n.bind(n,76443))},48601:function(e,t,n){"use strict";var o=n(57437);n(2265);var r=n(23983);n(12378),t.Z=e=>{let{label:t,value:n,onChange:l,type:i="text",autoComplete:a="off"}=e;return(0,o.jsx)("div",{className:"textFieldContainer",children:(0,o.jsx)(r.Z,{margin:"normal",fullWidth:!0,label:t,value:n,onChange:l,type:i,autoComplete:a,className:"customTextField"})})}},85051:function(e,t,n){"use strict";n.d(t,{N_:function(){return d},OE:function(){return a},WC:function(){return u},YA:function(){return i},iJ:function(){return l},yd:function(){return s}});var o=n(8507),r=n(36074);let l=(0,o.LC)({reducerPath:"authApi",baseQuery:(0,r.ni)({baseUrl:"http://localhost:3001",prepareHeaders:(e,t)=>{let{getState:n}=t,o=localStorage.getItem("accessToken");return o&&e.set("authorization","Bearer ".concat(o)),e}}),endpoints:e=>({login:e.mutation({query:e=>({url:"/api/auth/login",method:"POST",body:e})}),signUp:e.mutation({query:e=>({url:"/api/auth/register",method:"POST",body:e})}),googleSignIn:e.mutation({query:e=>({url:"/api/auth/google",method:"POST",body:e})}),getWorkoutForUser:e.query({query:()=>"/api/auth/workout"}),getGoogleApiKey:e.query({query:()=>"/api/auth/googleApiKey"})})}),{useLoginMutation:i,useSignUpMutation:a,useGoogleSignInMutation:s,useGetWorkoutForUserQuery:u,useGetGoogleApiKeyQuery:d}=l},76443:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var o=n(57437),r=n(2265),l=n(16463),i=n(76548),a=n(20124),s=n(66648),u=n(34990),d=n(91326),c=n(58433),g=n(80511),m=n(40468),h=n(85051),f=n(87138),v=n(48601);let p=(0,r.createContext)(null);function x(e){let{clientId:t,nonce:n,onScriptLoadSuccess:o,onScriptLoadError:l,children:i}=e,a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{nonce:t,onScriptLoadSuccess:n,onScriptLoadError:o}=e,[l,i]=(0,r.useState)(!1),a=(0,r.useRef)(n);a.current=n;let s=(0,r.useRef)(o);return s.current=o,(0,r.useEffect)(()=>{let e=document.createElement("script");return e.src="https://accounts.google.com/gsi/client",e.async=!0,e.defer=!0,e.nonce=t,e.onload=()=>{var e;i(!0),null===(e=a.current)||void 0===e||e.call(a)},e.onerror=()=>{var e;i(!1),null===(e=s.current)||void 0===e||e.call(s)},document.body.appendChild(e),()=>{document.body.removeChild(e)}},[t]),l}({nonce:n,onScriptLoadSuccess:o,onScriptLoadError:l}),s=(0,r.useMemo)(()=>({clientId:t,scriptLoadedSuccessfully:a}),[t,a]);return r.createElement(p.Provider,{value:s},i)}let A={large:40,medium:32,small:20};function y(e){let{onSuccess:t,onError:n,useOneTap:o,promptMomentNotification:l,type:i="standard",theme:a="outline",size:s="large",text:u,shape:d,logo_alignment:c,width:g,locale:m,click_listener:h,containerProps:f,...v}=e,x=(0,r.useRef)(null),{clientId:y,scriptLoadedSuccessfully:w}=function(){let e=(0,r.useContext)(p);if(!e)throw Error("Google OAuth components must be used within GoogleOAuthProvider");return e}(),S=(0,r.useRef)(t);S.current=t;let b=(0,r.useRef)(n);b.current=n;let C=(0,r.useRef)(l);return C.current=l,(0,r.useEffect)(()=>{var e,t,n,r,l,f,p,A,j;if(w)return null===(n=null===(t=null===(e=null==window?void 0:window.google)||void 0===e?void 0:e.accounts)||void 0===t?void 0:t.id)||void 0===n||n.initialize({client_id:y,callback:e=>{var t,n;if(!(null==e?void 0:e.credential))return null===(t=b.current)||void 0===t?void 0:t.call(b);let{credential:o,select_by:r}=e;S.current({credential:o,clientId:null!==(n=null==e?void 0:e.clientId)&&void 0!==n?n:null==e?void 0:e.client_id,select_by:r})},...v}),null===(f=null===(l=null===(r=null==window?void 0:window.google)||void 0===r?void 0:r.accounts)||void 0===l?void 0:l.id)||void 0===f||f.renderButton(x.current,{type:i,theme:a,size:s,text:u,shape:d,logo_alignment:c,width:g,locale:m,click_listener:h}),o&&(null===(j=null===(A=null===(p=null==window?void 0:window.google)||void 0===p?void 0:p.accounts)||void 0===A?void 0:A.id)||void 0===j||j.prompt(C.current)),()=>{var e,t,n;o&&(null===(n=null===(t=null===(e=null==window?void 0:window.google)||void 0===e?void 0:e.accounts)||void 0===t?void 0:t.id)||void 0===n||n.cancel())}},[y,w,o,i,a,s,u,d,c,g,m]),r.createElement("div",{...f,ref:x,style:{height:A[s],...null==f?void 0:f.style}})}let w={fontFamily:"'Inria Sans', sans-serif",color:"#3d2d69",fontSize:"52px"},S={border:"3px solid #4e2a84",padding:"20px 0",borderRadius:"8px",width:"350px",height:"510px"},b={backgroundColor:"#4e2a84",color:"white",borderRadius:"8px",fontSize:"16px",fontWeight:"bold",margin:"15px 0","&:hover":{backgroundColor:"#7158b6"}},C={display:"flex",alignItems:"center",justifyContent:"center",margin:"10px 0"},j={flex:1,border:"none",borderTop:"1px solid #ccc"},k={margin:"0 10px",color:"#666",fontSize:"14px",fontWeight:"bold",textTransform:"uppercase"},P={color:"#4e2a84",fontSize:"16px",fontWeight:"bold",textDecoration:"none"};function E(){let e=(0,l.useRouter)(),[t,p]=(0,r.useState)(""),[A,E]=(0,r.useState)(""),[I,R]=(0,r.useState)(!1),[Z,W]=(0,r.useState)(!1),[O]=(0,h.YA)(),[N,T]=(0,r.useState)(""),[_]=(0,h.yd)(),{data:q}=(0,h.N_)(void 0,{skip:!0}),{data:G,isLoading:U,isError:F}=(0,h.WC)(void 0,{skip:!I});(0,r.useEffect)(()=>{I&&!U&&G&&(localStorage.setItem("workoutPlan",JSON.stringify(G)),W(!1),e.push("/home"))},[I,U,G,e]);let V=async e=>{e.preventDefault(),W(!0),T("");try{let{user:e,accessToken:n}=await O({email:t,password:A}).unwrap();localStorage.setItem("user",JSON.stringify(e)),localStorage.setItem("accessToken",n),R(!0)}catch(e){var n;T((null===(n=e.data)||void 0===n?void 0:n.message)||"Failed to log in. Please check your credentials and try again."),W(!1)}},z=async t=>{W(!0),T("");try{let{credential:n}=t;if(n){let{firstName:t,lastName:o,email:r,user:l,accessToken:i}=await _({token:n}).unwrap();l?(localStorage.setItem("user",JSON.stringify(l)),localStorage.setItem("accessToken",i),R(!0)):(localStorage.setItem("firstName",t),localStorage.setItem("lastName",o),localStorage.setItem("email",r),localStorage.setItem("password","Google_OAuth_User"),e.push("/signUp"))}}catch(e){console.error("Google sign-in failed:",e),T("Google sign-in failed. Please try again.")}finally{W(!1)}};return(0,o.jsxs)(c.ZP,{container:!0,component:"main",children:[(0,o.jsx)(a.ZP,{}),(0,o.jsx)(c.ZP,{item:!0,xs:!1,sm:!1,md:8,sx:{position:"relative",width:"100%",height:"100vh",overflow:"hidden",display:{xs:"none",sm:"none",md:"block"}},children:(0,o.jsx)(s.default,{src:n(97338),alt:"bg",layout:"fill",objectFit:"cover",quality:100})}),(0,o.jsx)(c.ZP,{item:!0,xs:12,sm:12,md:4,component:u.Z,elevation:6,square:!0,container:!0,sx:{height:"100vh",backgroundColor:"white",overflow:"hidden"},children:(0,o.jsxs)(d.Z,{sx:{...S,my:8,mx:4,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,o.jsx)(g.Z,{sx:w,children:"Sign in"}),(0,o.jsxs)(d.Z,{component:"form",noValidate:!0,sx:{mt:1},onSubmit:V,children:[(0,o.jsx)(v.Z,{label:"Email Address",value:t,onChange:e=>p(e.target.value.toLowerCase()),autoComplete:"email"}),(0,o.jsx)(v.Z,{label:"Password",value:A,onChange:e=>E(e.target.value),autoComplete:"current-password",type:"password"}),N&&(0,o.jsx)(g.Z,{color:"error",sx:{mt:2},children:N}),(0,o.jsx)(i.Z,{sx:b,type:"submit",fullWidth:!0,variant:"contained",disabled:Z,children:Z?(0,o.jsx)(m.Z,{size:24}):"Sign In"}),(0,o.jsxs)("div",{style:C,children:[(0,o.jsx)("hr",{style:j}),(0,o.jsx)("span",{style:k,children:"OR"}),(0,o.jsx)("hr",{style:j})]}),(0,o.jsx)(x,{clientId:"321889824130-eidhev8i41sm3k36rm0qcee7cbjc7jmq.apps.googleusercontent.com",children:(0,o.jsx)(y,{onSuccess:z,onError:()=>T("Google sign-in failed.")})}),(0,o.jsxs)(g.Z,{children:["Don't have an account?",(0,o.jsx)(f.default,{href:"/signUp",style:P,children:" Sign Up"})]})]})]})})]})}},16463:function(e,t,n){"use strict";var o=n(71169);n.o(o,"usePathname")&&n.d(t,{usePathname:function(){return o.usePathname}}),n.o(o,"useRouter")&&n.d(t,{useRouter:function(){return o.useRouter}}),n.o(o,"useSearchParams")&&n.d(t,{useSearchParams:function(){return o.useSearchParams}})},12378:function(){},97338:function(e,t,n){"use strict";n.r(t),t.default={src:"/_next/static/media/signInBg.4cea8b95.png",height:614,width:1109,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAMAAACEE47CAAAAP1BMVEWgg32/k4WMfXuVcGiYhYSKdnZ/Y19rWFmffHVUS1mXdmSJXk9YQkk9Mzd+VTyEa2hFPEbJnYdaVmH77eRwVlrXWCs0AAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAKklEQVR4nAXBhQEAIAwDsA6muP1/KwmMGUlWh5LnqWXALwkMG+YvTrT6ARAvAQpDLyZRAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:4}}},function(e){e.O(0,[531,874,433,909,648,917,13,538,971,23,744],function(){return e(e.s=75255)}),_N_E=e.O()}]);