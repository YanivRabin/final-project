(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{65427:function(e,t,l){Promise.resolve().then(l.bind(l,75130))},75130:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return z}});var r=l(57437),i=l(2265),a=l(7449),o=l.n(a),n=l(20124),d=l(58433),s=l(70270),u=l(21561),c=l(80511),h=l(94444),g=l(81705),x=l(91326),m=l(40468),b=l(84161),A=l(97183),p=l(14595),v=l(94696),j=l(28549),f=l(76548),k=l(56065),Z=l(94893),w=l(91651),y=l(44908),P=l(11929),C=l(23983),S=e=>"checkbox"===e.type?(0,r.jsx)(x.Z,{children:(0,r.jsx)(y.Z,{control:(0,r.jsx)(P.Z,{id:e.id,name:e.name,checked:!!e.value,onChange:e.onChange,disabled:e.dis,required:e.req}),label:e.title})}):(0,r.jsxs)(x.Z,{children:[(0,r.jsx)("label",{style:{fontWeight:"bold"},htmlFor:e.id,children:e.title}),(0,r.jsx)(C.Z,{fullWidth:!0,margin:"dense",size:"small",id:e.id,name:e.name,value:e.value,onChange:e.onChange,disabled:e.dis,required:e.req,type:e.type,InputProps:e.InputProps,select:e.select,children:e.content})]});let W={input:{color:"white",backgroundColor:"#3a3a3a"},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"white"},"&:hover fieldset":{borderColor:"white"},"&.Mui-focused fieldset":{borderColor:"white"},backgroundColor:"#3a3a3a"},"& .MuiInputLabel-root":{color:"white"},"& .MuiInputAdornment-root":{color:"white"},"& .MuiFormControl-root":{backgroundColor:"#3a3a3a"},"& .MuiSelect-root":{color:"white",backgroundColor:"#3a3a3a"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"white"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"white"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"white"},"& .MuiSelect-icon":{color:"white"},"& .MuiMenuItem-root":{color:"white"},"& .Mui-selected":{color:"white"},"& .MuiSelect-font":{color:"white"}};var I=l(79332);let M=[{value:"Stay in Shape",label:"Stay in Shape"},{value:"Muscle Gain",label:"Muscle Gain"},{value:"Caloric Deficit",label:"Caloric Deficit"},{value:"Flexibility",label:"Flexibility"},{value:"Endurance",label:"Endurance"}],F=[{value:1,label:"One"},{value:2,label:"Two"},{value:3,label:"Three"},{value:4,label:"Four"},{value:5,label:"Five"},{value:6,label:"Six"},{value:7,label:"Seven"}],U=[{value:15,label:"15 minutes"},{value:30,label:"30 minutes"},{value:60,label:"1 hour"},{value:90,label:"1 hour and 30 minutes"},{value:120,label:"2 hours"}],E=[{value:"gym",label:"GYM"},{value:"home",label:"Home"},{value:"outdoor",label:"Outdoor"}];function D(e){let[t,l]=(0,i.useState)("one"),[a]=(0,I.kD)(),[o]=(0,I.Ux)(),[n,u]=(0,i.useState)(!1),[h,g]=(0,i.useState)({...e}),C=e=>{g({...h,[e.target.name]:e.target.value})},D=e=>{let t=e.target.name;g({...h,[t]:e.target.value})},O=e=>{g({...h,[e.target.name]:e.target.checked})},[q,L]=(0,i.useState)({required:!0,disabled:!0,isEdit:!0}),N=async e=>{if(e.preventDefault(),L(e=>({...e,disabled:!e.disabled,isEdit:!e.isEdit})),!q.isEdit){u(!0),localStorage.setItem("loading",JSON.stringify(n));try{let e;let t=await a(h).unwrap();for(console.log("User updated successfully!",t),localStorage.setItem("user",JSON.stringify(t));!e;)e=await o(t).unwrap();localStorage.setItem("workoutPlan",JSON.stringify(e))}catch(e){console.error("Error updating user or creating workout plan, try again."),e instanceof SyntaxError?alert("Failed to update user: Server returned an unexpected response."):404===e?alert("Failed to update user: User not found."):409===e?alert("Failed to update user: Email already in use."):400===e?alert("Failed to update user: Validation failed."):alert("Failed to update user or create workout plan.")}finally{u(!1),localStorage.removeItem("loading"),window.location.reload()}}},z=(e,t)=>{g(l=>({...l,dietaryRestrictions:{...l.dietaryRestrictions,[e]:t.target.checked}}))};return n?(0,r.jsxs)(x.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",width:"100%",textAlign:"center"},children:[(0,r.jsx)(m.Z,{size:50}),(0,r.jsx)(c.Z,{sx:{mt:2,color:"black"},children:"Updating workout plan and Nutrition menu..."})]}):(0,r.jsxs)(s.Z,{variant:"outlined",sx:{height:"100%",width:"100%",padding:"20px",boxShadow:"0 3px 5px rgba(0,0,0,0.2)",borderRadius:"10px"},children:[(0,r.jsxs)(b.Z,{value:t,onChange:(e,t)=>{l(t)},textColor:"secondary",indicatorColor:"secondary",sx:{borderBottom:1,borderColor:"divider"},children:[(0,r.jsx)(A.Z,{value:"one",label:"Personal Info"}),(0,r.jsx)(A.Z,{value:"two",label:"Workout Info"}),(0,r.jsx)(A.Z,{value:"three",label:"Dietary Restrictions"})]}),(0,r.jsx)(p.Z,{}),(0,r.jsxs)(v.Z,{sx:{p:3,textAlign:{xs:"center",md:"start"}},children:["one"===t&&(0,r.jsxs)(j.Z,{fullWidth:!0,children:[(0,r.jsxs)(d.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(d.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(S,{id:"age",name:"age",value:h.age,onChange:C,title:"Age",dis:q.disabled,req:q.required})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(S,{id:"height",name:"height",value:h.height,onChange:C,title:"Height",dis:q.disabled,req:q.required})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(S,{id:"weight",name:"weight",value:h.weight,onChange:C,title:"Weight",dis:q.disabled,req:q.required})})]}),(0,r.jsx)(x.Z,{textAlign:"right",mt:3,children:(0,r.jsx)(f.Z,{sx:{p:"1rem 2rem",height:"3rem",backgroundColor:"#ff4081",color:"white","&:hover":{backgroundColor:"#ff79b0"}},size:"large",variant:"contained",onClick:N,disabled:n,children:n?(0,r.jsx)(m.Z,{size:24,color:"inherit"}):q.isEdit?"EDIT":"UPDATE"})})]}),"two"===t&&(0,r.jsxs)(j.Z,{fullWidth:!0,children:[(0,r.jsxs)(d.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(d.ZP,{item:!0,xs:12,md:6,children:(0,r.jsxs)(j.Z,{fullWidth:!0,children:[(0,r.jsx)(k.Z,{id:"workoutGoals-label",style:W["& .MuiInputLabel-root"],children:"Workout Goals"}),(0,r.jsx)(Z.Z,{labelId:"workoutGoals-label",id:"workoutGoals",name:"workoutGoals",value:h.workoutGoals,onChange:D,label:"Workout Goals",disabled:q.disabled,required:q.required,sx:W,children:M.map(e=>(0,r.jsx)(w.Z,{value:e.value,children:e.label},e.value))})]})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,md:6,children:(0,r.jsxs)(j.Z,{fullWidth:!0,children:[(0,r.jsx)(k.Z,{id:"daysPerWeek-label",style:W["& .MuiInputLabel-root"],children:"Days per Week"}),(0,r.jsx)(Z.Z,{labelId:"daysPerWeek-label",id:"daysPerWeek",name:"daysPerWeek",value:String(h.daysPerWeek),onChange:D,label:"Days per Week",disabled:q.disabled,required:q.required,sx:W,children:F.map(e=>(0,r.jsx)(w.Z,{value:String(e.value),children:e.label},e.value))})]})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,md:6,children:(0,r.jsxs)(j.Z,{fullWidth:!0,children:[(0,r.jsx)(k.Z,{id:"minutesPerWorkout-label",style:W["& .MuiInputLabel-root"],children:"Minutes per Workout"}),(0,r.jsx)(Z.Z,{labelId:"minutesPerWorkout-label",id:"minutesPerWorkout",name:"minutesPerWorkout",value:String(h.minutesPerWorkout),onChange:D,label:"Minutes per Workout",disabled:q.disabled,required:q.required,sx:W,children:U.map(e=>(0,r.jsx)(w.Z,{value:String(e.value),children:e.label},e.value))})]})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,md:6,children:(0,r.jsxs)(j.Z,{fullWidth:!0,children:[(0,r.jsx)(k.Z,{id:"workoutLocation-label",style:W["& .MuiInputLabel-root"],children:"Workout Location"}),(0,r.jsx)(Z.Z,{labelId:"workoutLocation-label",id:"workoutLocation",name:"workoutLocation",value:h.workoutLocation,onChange:D,label:"Workout Location",disabled:q.disabled,required:q.required,sx:W,children:E.map(e=>(0,r.jsx)(w.Z,{value:e.value,children:e.label},e.value))})]})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(y.Z,{control:(0,r.jsx)(P.Z,{checked:h.includeWarmup,onChange:O,name:"includeWarmup",color:"primary"}),label:"Include Warmup",disabled:q.disabled})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(y.Z,{control:(0,r.jsx)(P.Z,{checked:h.includeStretching,onChange:O,name:"includeStretching",color:"primary"}),label:"Include Stretching",disabled:q.disabled})})]}),(0,r.jsx)(x.Z,{textAlign:"right",mt:3,children:(0,r.jsx)(f.Z,{sx:{p:"1rem 2rem",height:"3rem",backgroundColor:"#ff4081",color:"white","&:hover":{backgroundColor:"#ff79b0"}},size:"large",variant:"contained",onClick:N,disabled:n,children:n?(0,r.jsx)(m.Z,{size:24,color:"inherit"}):q.isEdit?"EDIT":"UPDATE"})})]}),"three"===t&&(0,r.jsx)(x.Z,{sx:{maxHeight:"50vh",overflow:"auto"},children:(0,r.jsx)(j.Z,{fullWidth:!0,children:(0,r.jsxs)(d.ZP,{container:!0,direction:"column",spacing:2,children:[["vegan","vegetarian","pescatarian","glutenFree","dairyFree","nutFree","soyFree","eggFree","shellfishFree","lactoseFree","kosher","halal"].map(e=>(0,r.jsx)(d.ZP,{item:!0,children:(0,r.jsx)(y.Z,{control:(0,r.jsx)(P.Z,{checked:!!h.dietaryRestrictions[e],onChange:t=>z(e,t),name:e,color:"primary"}),label:e.charAt(0).toUpperCase()+e.slice(1),disabled:q.disabled})},e)),(0,r.jsx)(d.ZP,{container:!0,justifyContent:"flex-end",item:!0,xs:12,children:(0,r.jsx)(f.Z,{sx:{p:"1rem 2rem",my:2,height:"3rem",backgroundColor:"#ff4081",color:"white","&:hover":{backgroundColor:"#ff79b0"}},size:"large",variant:"contained",onClick:N,disabled:n,children:n?(0,r.jsx)(m.Z,{size:24,color:"inherit"}):q.isEdit?"EDIT":"UPDATE"})})]})})})]})]})}var O=l(66648),q={src:"/_next/static/media/male.c1389975.png",height:896,width:918,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAPFBMVEX////JycnQ0ND///9MaXHb29z////+/v7v7+/////Nzc7Q0NH6+vqjo6RnZ2g8PD6Xl5hwcHFWVlfX19dJP0OWAAAADXRSTlP69fk9APM8u/w0vr49D21/NgAAAAlwSFlzAAAuIwAALiMBeKU/dgAAADtJREFUeJwFwYkBgDAIALFrpQIq0Gf/XU0QV1AXrmFg4+YJ5iReWsZakQ3OrtoHlF7VUT7IhBtxNVOXH0TLAfO598V3AAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8},L={src:"/_next/static/media/female.43824001.png",height:937,width:938,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAANlBMVEX////////9/f3///+9uLfRzcz////////9/f1MaXGlnpx9dHDk4uL///9URkJrYFzl5OOvqqdGL6UsAAAADXRSTlMu6+zn/vy09rAA/v75ZQTnfAAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAD1JREFUeJwdylESgCAIQMGHikAF2P0v20z7vQTbbBMgea0c4PnUbenYeavWmZh2Vetkp3ZrOoxcfw5cxIkPSDIB8SVKv0wAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8};let N=(0,h.Z)();var z=()=>{let[e,t]=(0,i.useState)(null),l=(null==e?void 0:e.gender)==="male"?q:L;if((0,i.useEffect)(()=>{let e=localStorage.getItem("user");if(e)try{let l=JSON.parse(e);t(l)}catch(e){console.error("Failed to parse user from localStorage:",e)}},[]),!e)return(0,r.jsx)("div",{children:"Loading..."});let a="".concat(e.firstName," ").concat(e.lastName);return(0,r.jsxs)(g.Z,{theme:N,children:[(0,r.jsx)(o(),{children:(0,r.jsx)("title",{children:"Profile Page"})}),(0,r.jsx)(n.ZP,{}),(0,r.jsxs)(d.ZP,{container:!0,direction:"column",sx:{overflowX:"hidden",px:{xs:0,md:7}},children:[(0,r.jsx)(d.ZP,{item:!0,children:(0,r.jsx)(s.Z,{variant:"outlined",children:(0,r.jsx)(d.ZP,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",children:(0,r.jsxs)(d.ZP,{item:!0,sx:{p:"1.5rem 0rem",textAlign:"center"},children:[(0,r.jsx)(u.Z,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},children:(0,r.jsx)(O.default,{src:l,alt:"Profile Picture",width:100,height:100})}),(0,r.jsx)(c.Z,{variant:"h6",children:a}),(0,r.jsx)(c.Z,{color:"text.secondary",children:e.email})]})})})}),(0,r.jsx)(d.ZP,{item:!0,sx:{mt:3},children:(0,r.jsx)(D,{firstName:e.firstName,lastName:e.lastName,email:e.email,gender:e.gender,age:e.age,height:e.height,weight:e.weight,workoutGoals:e.workoutGoals,daysPerWeek:e.daysPerWeek,minutesPerWorkout:e.minutesPerWorkout,workoutLocation:e.workoutLocation,includeWarmup:e.includeWarmup,includeStretching:e.includeStretching,dietaryRestrictions:e.dietaryRestrictions})})]})]})}},79332:function(e,t,l){"use strict";l.d(t,{Ux:function(){return o},kD:function(){return n},tX:function(){return a}});var r=l(8507),i=l(36074);let a=(0,r.LC)({reducerPath:"feedApi",baseQuery:(0,i.ni)({baseUrl:"http://localhost:3001",prepareHeaders:(e,t)=>{let{getState:l}=t,r=localStorage.getItem("accessToken");return r&&e.set("authorization","Bearer ".concat(r)),e}}),endpoints:e=>({createWorkoutPlan:e.mutation({query:e=>({url:"/api/gemini/create-workout",method:"POST",body:e})}),updateUser:e.mutation({query:e=>({url:"/api/auth/updateUser",method:"PUT",body:e})})})}),{useCreateWorkoutPlanMutation:o,useUpdateUserMutation:n}=a}},function(e){e.O(0,[874,433,909,648,13,538,300,174,50,971,23,744],function(){return e(e.s=65427)}),_N_E=e.O()}]);